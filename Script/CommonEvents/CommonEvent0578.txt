// EVENT 0578
Name "RC:スフィンクス1"

If(0,2401,1)
 ShowMessageFace("sphinx_fc1",0,0,2,1)
 ShowMessage("【スフィンクス】")
 ShowMessage("さっきは、牛魔王に悪いことをしてしまったな。")
 ShowMessage("奴の先祖とは気安かったゆえ、からかいが過ぎたかもしれん。")
 ShowMessageFace("sphinx_fc1",0,0,2,2)
 ShowMessage("【スフィンクス】")
 ShowMessage("ところで、勇者ルカよ……")
 ShowMessage("暇があれば、我が謎掛けを受けてみんか？")
 ShowMessageFace("sphinx_fc1",0,0,2,3)
 ShowMessage("【スフィンクス】")
 ShowMessage("身構えるでない、間違っても食らったりはせん。")
 ShowMessage("ただの余暇、お遊びに過ぎんからな。")
 If(1,1098,0,3,0)
  ShowMessageFace("",0,0,2,4)
  ShowMessage("今は先に、ピザを届けに行こう。")
  ShowMessage("ステージで練習しているはずだ。")
  EndEventProcessing()
  0()
 EndIf()
 If(1,1098,0,4,0)
  ShowMessageFace("",0,0,2,5)
  ShowMessage("今は先に、一階の食堂に昼ごはんを食べに行こう。")
  EndEventProcessing()
  0()
 EndIf()
 If(1,1098,0,7,0)
  ShowMessageFace("",0,0,2,6)
  ShowMessage("今は先に、ピザを届けに行こう。")
  ShowMessage("ステージで練習しているはずだ。")
  EndEventProcessing()
  0()
 EndIf()
 If(0,2338,0)
  ShowMessageFace("",0,0,2,7)
  ShowMessage("今は、荷物を運んでいる最中だ。")
  ShowMessage("この奥で荷物を下ろそう。")
  EndEventProcessing()
  0()
 EndIf()
 JumpToLabel("メイン")
 0()
EndIf()
If(0,2401,0)
 ShowMessageFace("sphinx_fc1",0,0,2,8)
 ShowMessage("【スフィンクス】")
 ShowMessage("ふむ……まだ我に何か用があるというのか？")
 JumpToLabel("メイン")
 0()
EndIf()
DefineLabel("メイン")
If(1,1098,0,12,2)
 355("ex_choice_add(\"謎掛けに挑戦する（時間経過）\",1,")
 655("\"v[1098] >= 5\",0)")
 0()
EndIf()
If(1,1098,0,13,1)
 355("ex_choice_add(\"謎掛けに挑戦する\",1,")
 655("\"v[1098] >= 5\",0)")
 0()
EndIf()
355("ex_choice_add(\"異変について相談する\",2,")
655("\"s[2341]\",0)")
655("ex_choice_add(\"後悔していることについて聞く\",3,")
655("\"s[2342]\",0)")
655("ex_choice_add(\"時を繰り返す道具について聞く\",4,")
655("\"s[2343]\",0)")
655("ex_choice_add(\"ピザを注文したか聞く\",5,")
655("\"s[2345]\",0)")
355("ex_choice_add(\"謎のマキナについて聞く\",6,")
655("\"s[2365]\",0)")
655("ex_choice_add(\"作戦に必要な品について聞く\",7,")
655("\"s[2364]\",0)")
655("ex_choice_add(\"お茶会に誘う\",8,")
655("\"s[2378]\",0)")
655("ex_choice_add(\"立ち去る\",10)")
355("ex_choice_show(0,11,[0,0])")
If(1,9,0,1,0)
 If(0,2401,1)
  If(1,1098,0,13,1)
   If(0,2371,1)
    ShowMessageFace("sphinx_fc1",0,0,2,9)
    ShowMessage("【スフィンクス】")
    ShowMessage("では……全部で三問、見事に解いてみせるが良い。")
    ShowMessage("間違えた時点で失格、全て解けば褒美をやろう。")
    ShowMessageFace("sphinx_fc1",0,0,2,10)
    ShowMessage("【スフィンクス】")
    ShowMessage("さて、第一問目――")
    ShowMessageFace("ruka_fc1",0,0,2,11)
    ShowMessage("【ルカ】")
    ShowMessage("正解は「ねこのここねこ、ししのここじし」。")
    ShowMessage("二問目は「1/3」、三問目は「無」。")
    ShowMessageFace("sphinx_fc1",2,0,2,12)
    ShowMessage("【スフィンクス】")
    ShowMessage("……！？！？！？！？")
    ShowMessageFace("ruka_fc1",0,0,2,13)
    ShowMessage("【ルカ】")
    ShowMessage("全問正解だね、褒美をもらっていくよ。")
    ShowMessageFace("sphinx_fc1",2,0,2,14)
    ShowMessage("【スフィンクス】")
    ShowMessage("こ、これは……いったい……")
    250(bytes(0x04,0x08,0x6f,0x3a,0x0c,0x52,0x50,0x47,0x3a,0x3a,0x53,0x45,0x08,0x3a,0x0a,0x40,0x6e,0x61,0x6d,0x65,0x49,0x22,0x0a,0x49,0x74,0x65,0x6d,0x31,0x06,0x3a,0x06,0x45,0x54,0x3a,0x0c,0x40,0x76,0x6f,0x6c,0x75,0x6d,0x65,0x69,0x55,0x3a,0x0b,0x40,0x70,0x69,0x74,0x63,0x68,0x69,0x69))
    ChangeSwitch(2357,2357,0)
    ChangeSwitch(2399,2399,0)
    ChangeSwitch(2371,2371,0)
    ChangeSwitch(2372,2372,0)
    ShowMessageFace("",0,0,2,15)
    ShowMessage("迷宮の書物・超級を手に入れた！")
    ShowMessageFace("",0,0,2,16)
    ShowMessage("これで、ヴィヌムは足止めできるかもしれない――")
    ShowMessage("さあ、他の準備も整えよう。")
    If(1,1099,0,4,0)
     RunCommonEvent(5842)
     EndEventProcessing()
     0()
    EndIf()
    221()
    ChangeSwitch(2401,2401,0)
    222()
    EndEventProcessing()
    0()
   Else()
    ChangeSwitch(2357,2357,0)
    ChangeSwitch(2401,2401,0)
    ShowMessageFace("sphinx_fc1",0,0,2,17)
    ShowMessage("【スフィンクス】")
    ShowMessage("褒美の品は、すでにお主が持っているはず。")
    ShowMessage("もう謎掛けの必要はあるまい……")
    JumpToLabel("メイン")
    0()
   EndIf()
   0()
  EndIf()
  ShowMessageFace("sphinx_fc1",0,0,2,18)
  ShowMessage("【スフィンクス】")
  ShowMessage("では……全部で三問、見事に解いてみせるが良い。")
  ShowMessage("間違えた時点で失格、全て解けば褒美をやろう。")
  ShowMessageFace("sphinx_fc1",0,0,2,19)
  ShowMessage("【スフィンクス】")
  ShowMessage("さて、第一問目……")
  ShowMessage("まずは、古典的教養を問うとしよう。")
  ShowMessageFace("sphinx_fc1",0,0,2,20)
  ShowMessage("【スフィンクス】")
  ShowMessage("「子子子子子子子子子子子子」。")
  ShowMessage("さて、これを何と読む？")
  ShowChoices(strings("ねこのここねこ、ししのここじし","あのここのこ、あのねこここのこ","し、ここに、ししのごとくしにたり","し、ししのこのごとく、しのことならん"),0)
  IfPlayerPicksChoice(0,"ねこのここねこ、ししのここじし")
   JumpToLabel("正解1")
   0()
  IfPlayerPicksChoice(1,"あのここのこ、あのねこここのこ")
   JumpToLabel("失敗1")
   0()
  IfPlayerPicksChoice(2,"し、ここに、ししのごとくしにたり")
   JumpToLabel("失敗1")
   0()
  IfPlayerPicksChoice(3,"し、ししのこのごとく、しのことならん")
   JumpToLabel("失敗1")
   0()
  404()
  DefineLabel("失敗1")
  ShowMessageFace("sphinx_fc1",2,0,2,21)
  ShowMessage("【スフィンクス】")
  ShowMessage("なんと……一問目から外れか。")
  ShowMessage("ずいぶん他愛ないな、牛魔王と同程度か。")
  ShowMessageFace("",0,0,2,22)
  ShowMessage("スフィンクスの問い掛けに失敗した……")
  ShowMessage("特にペナルティはないが、なんだか悔しいな。")
  If(1,1099,0,4,0)
   RunCommonEvent(5842)
   EndEventProcessing()
   0()
  EndIf()
  221()
  ChangeSwitch(2401,2401,0)
  RunCommonEvent(540)
  EndEventProcessing()
  DefineLabel("正解1")
  ShowMessageFace("sphinx_fc1",0,0,2,23)
  ShowMessage("【スフィンクス】")
  ShowMessage("うむ、正解だ……この程度は知っていて当然。")
  ShowMessage("それでは第二問と行こうぞ。")
  ShowMessageFace("sphinx_fc1",0,0,2,24)
  ShowMessage("【スフィンクス】")
  ShowMessage("とある夫婦に、二人の子供がいた。")
  ShowMessage("うち一人は、女の子だという。")
  ShowMessageFace("sphinx_fc1",0,0,2,25)
  ShowMessage("【スフィンクス】")
  ShowMessage("では……もう一人の子供が、女の子である確率は？")
  ShowMessage("なお、男も女も生まれる確率は50%とする。")
  ShowChoices(strings("1/2","1/3","2/3","1/4"),0)
  IfPlayerPicksChoice(0,"1/2")
   JumpToLabel("失敗2")
   0()
  IfPlayerPicksChoice(1,"1/3")
   JumpToLabel("正解2")
   0()
  IfPlayerPicksChoice(2,"2/3")
   JumpToLabel("失敗2")
   0()
  IfPlayerPicksChoice(3,"1/4")
   JumpToLabel("失敗2")
   0()
  404()
  DefineLabel("失敗2")
  ShowMessageFace("sphinx_fc1",0,0,2,26)
  ShowMessage("【スフィンクス】")
  ShowMessage("外れだ……正解は、1/3。")
  ShowMessage("ふふ、ずいぶん納得のいかなさそうな顔をしているな。")
  ShowMessageFace("sphinx_fc1",0,0,2,27)
  ShowMessage("【スフィンクス】")
  ShowMessage("これは数学の有名な問題でな……")
  ShowMessage("プロメスティンがメフィストあたりに解説を聞くがいい。")
  ShowMessageFace("",0,0,2,28)
  ShowMessage("スフィンクスの問い掛けに失敗した……")
  ShowMessage("特にペナルティはないが、なんだか悔しいな。")
  If(1,1099,0,4,0)
   RunCommonEvent(5842)
   EndEventProcessing()
   0()
  EndIf()
  221()
  ChangeSwitch(2401,2401,0)
  RunCommonEvent(540)
  EndEventProcessing()
  DefineLabel("正解2")
  ShowMessageFace("sphinx_fc1",0,0,2,29)
  ShowMessage("【スフィンクス】")
  ShowMessage("ほう、なかなかやるな……")
  ShowMessage("予想外に頭が回るようだ、感心したぞ。")
  ShowMessageFace("sphinx_fc1",0,0,2,30)
  ShowMessage("【スフィンクス】")
  ShowMessage("では、第三問……最後の問題だ。")
  ShowMessage("本来、決まった答えはない難問を問おうとしよう。")
  ShowMessageFace("sphinx_fc1",0,0,2,31)
  ShowMessage("【スフィンクス】")
  ShowMessage("犬に仏性はあるか、それともないか？")
  ShowChoices(strings("犬こそ最も仏に近い","無","あるもなしも同じ","答えない"),0)
  IfPlayerPicksChoice(0,"犬こそ最も仏に近い")
   JumpToLabel("失敗3")
   0()
  IfPlayerPicksChoice(1,"無")
   ShowMessageFace("sphinx_fc1",1,0,2,32)
   ShowMessage("【スフィンクス】")
   ShowMessage("ほう、実に面白いぞ！")
   ShowMessage("お主、まさかその歳で大悟しているのか……？")
   ShowMessageFace("sphinx_fc1",1,0,2,33)
   ShowMessage("【スフィンクス】")
   ShowMessage("我の完敗だが、実に楽しめたぞ。")
   ShowMessage("これを持って行け……")
   250(bytes(0x04,0x08,0x6f,0x3a,0x0c,0x52,0x50,0x47,0x3a,0x3a,0x53,0x45,0x08,0x3a,0x0a,0x40,0x6e,0x61,0x6d,0x65,0x49,0x22,0x0a,0x49,0x74,0x65,0x6d,0x31,0x06,0x3a,0x06,0x45,0x54,0x3a,0x0c,0x40,0x76,0x6f,0x6c,0x75,0x6d,0x65,0x69,0x55,0x3a,0x0b,0x40,0x70,0x69,0x74,0x63,0x68,0x69,0x69))
   ShowMessageFace("",0,0,2,34)
   ShowMessage("迷宮の書物・超級を手に入れた！")
   ShowMessageFace("ruka_fc1",0,0,2,35)
   ShowMessage("【ルカ】")
   ShowMessage("この本は……？")
   ShowMessageFace("sphinx_fc1",0,0,2,36)
   ShowMessage("【スフィンクス】")
   ShowMessage("知恵試しの秘宝でな……")
   ShowMessage("開いた者を、知識の迷宮へと閉じ込めるのだ。")
   ShowMessageFace("sphinx_fc1",0,0,2,37)
   ShowMessage("【スフィンクス】")
   ShowMessage("数々の難題を解けなければ、脱出は適わぬ。")
   ShowMessage("生半可な知恵者では、本の中で朽ちる事となろう。")
   ShowMessageFace("ruka_fc1",0,0,2,38)
   ShowMessage("【ルカ】")
   ShowMessage("ひぇぇ……")
   ShowMessageFace("",0,0,2,39)
   ShowMessage("もらったはいいが、すごく物騒な本だ。")
   ShowMessage("絶対に開かないようにしよう……")
   If(0,2356,0)
    ShowMessageFace("",0,0,2,40)
    ShowMessage("とにかく、これでスフィンクスの鼻はへし折った。")
    ShowMessage("牛魔王も満足してくれるはずだ――")
    0()
   EndIf()
   ChangeSwitch(2357,2357,0)
   If(1,1099,0,4,0)
    RunCommonEvent(5842)
    EndEventProcessing()
    0()
   EndIf()
   221()
   ChangeSwitch(2401,2401,0)
   RunCommonEvent(540)
   EndEventProcessing()
   0()
  IfPlayerPicksChoice(2,"あるもなしも同じ")
   JumpToLabel("失敗3")
   0()
  IfPlayerPicksChoice(3,"答えない")
   ShowMessageFace("sphinx_fc1",0,0,2,41)
   ShowMessage("【スフィンクス】")
   ShowMessage("ふ……答えないこと自体が解答というわけか。")
   ShowMessage("残念ながら、あてが外れたな。")
   ShowMessageFace("sphinx_fc1",0,0,2,42)
   ShowMessage("【スフィンクス】")
   ShowMessage("だが、予想以上に奮闘したようだ。")
   ShowMessage("流石は勇者、牛魔王などとは頭の出来が違うな。")
   ShowMessageFace("",0,0,2,43)
   ShowMessage("スフィンクスの問い掛けに失敗した……")
   ShowMessage("特にペナルティはないが、なんだか悔しいな。")
   If(1,1099,0,4,0)
    RunCommonEvent(5842)
    EndEventProcessing()
    0()
   EndIf()
   221()
   ChangeSwitch(2401,2401,0)
   RunCommonEvent(540)
   EndEventProcessing()
   0()
  404()
  DefineLabel("失敗3")
  ShowMessageFace("sphinx_fc1",0,0,2,44)
  ShowMessage("【スフィンクス】")
  ShowMessage("ほう、なぜそう考える？")
  ShowMessageFace("ruka_fc1",0,0,2,45)
  ShowMessage("【ルカ】")
  ShowMessage("……………………")
  ShowMessageFace("",0,0,2,46)
  ShowMessage("満足な理由を答えられなかった……")
  ShowMessageFace("sphinx_fc1",0,0,2,47)
  ShowMessage("【スフィンクス】")
  ShowMessage("残念だが、納得のできる答えではないな。")
  ShowMessage("答えのない問いで人を試すのも、また無粋か……")
  ShowMessageFace("sphinx_fc1",0,0,2,48)
  ShowMessage("【スフィンクス】")
  ShowMessage("だが、予想以上に奮闘したようだ。")
  ShowMessage("流石は勇者、牛魔王などとは頭の出来が違うな。")
  ShowMessageFace("",0,0,2,49)
  ShowMessage("スフィンクスの問い掛けに失敗した……")
  ShowMessage("特にペナルティはないが、なんだか悔しいな。")
  If(1,1099,0,4,0)
   RunCommonEvent(5842)
   EndEventProcessing()
   0()
  EndIf()
  221()
  ChangeSwitch(2401,2401,0)
  RunCommonEvent(540)
  EndEventProcessing()
  0()
 EndIf()
 If(0,2401,0)
  ShowMessageFace("sphinx_fc1",0,0,2,50)
  ShowMessage("【スフィンクス】")
  ShowMessage("では、別の謎掛けで楽しむとしよう。")
  ShowMessage("第一問、海の深さを知る者が――")
  ShowMessageFace("",0,0,2,51)
  ShowMessage("スフィンクスの謎解きをして過ごした……")
  RunCommonEvent(540)
  EndEventProcessing()
  0()
 EndIf()
 0()
EndIf()
If(1,9,0,2,0)
 ShowMessageFace("",0,0,2,52)
 ShowMessage("ルカは、異変について相談した……")
 ShowMessageFace("sphinx_fc1",2,0,2,53)
 ShowMessage("【スフィンクス】")
 ShowMessage("時を繰り返すとは、何かの呪いか……")
 ShowMessage("悪いが、力にはなれんぞ。")
 ShowMessageFace("sphinx_fc1",2,0,2,54)
 ShowMessage("【スフィンクス】")
 ShowMessage("……そう言えば、そんな秘宝があったな。")
 ShowMessage("昔のことゆえ、記憶も虚ろだが……")
 ShowMessageFace("",0,0,2,55)
 ShowMessage("スフィンクスは頼れそうにない……")
 JumpToLabel("メイン")
 0()
EndIf()
If(1,9,0,3,0)
 ShowMessageFace("sphinx_fc1",0,0,2,56)
 ShowMessage("【スフィンクス】")
 ShowMessage("後悔、か……")
 ShowMessage("遠き過去のことよ。")
 ShowMessageFace("",0,0,2,57)
 ShowMessage("有益な情報は得られなかった……")
 JumpToLabel("メイン")
 0()
EndIf()
If(1,9,0,4,0)
 ShowMessageFace("sphinx_fc1",0,0,2,58)
 ShowMessage("【スフィンクス】")
 ShowMessage("時を繰り返すアイテム……？")
 ShowMessage("心当たりなら、あるぞ。")
 If(1,1102,0,2,2)
  ShowMessageFace("ruka_fc1",0,0,2,59)
  ShowMessage("【ルカ】")
  ShowMessage("えっ……！？")
  ShowMessageFace("sphinx_fc1",0,0,2,60)
  ShowMessage("【スフィンクス】")
  ShowMessage("時戻しの像、だろう。")
  ShowMessage("確か、イリアスが作った秘宝だという話だ。")
  ShowMessageFace("ruka_fc1",0,0,2,61)
  ShowMessage("【ルカ】")
  ShowMessage("イリアス様が……？")
  ShowMessage("それ、どこにあるの？")
  0()
 EndIf()
 ShowMessageFace("sphinx_fc1",0,0,2,62)
 ShowMessage("【スフィンクス】")
 ShowMessage("噂を聞いたのは、聖魔大戦当時だ。")
 ShowMessage("今の所在は知らん……さほど興味もなかったゆえ。")
 ShowMessageFace("sphinx_fc1",0,0,2,63)
 ShowMessage("【スフィンクス】")
 ShowMessage("秘宝について、他に詳しい者はおらんか？")
 ShowMessage("学者か……もしくは、海賊などな。")
 If(1,1102,0,3,2)
  ChangeVariable(1102,1102,0,0,3)
  ShowMessageFace("",0,0,2,64)
  ShowMessage("学者か、海賊か――")
  ShowMessage("秘宝に詳しい者を探して、さらに情報を集めよう。")
  0()
 EndIf()
 JumpToLabel("メイン")
 0()
EndIf()
If(1,9,0,5,0)
 ShowMessageFace("sphinx_fc1",0,0,2,65)
 ShowMessage("【スフィンクス】")
 ShowMessage("ピザか……")
 ShowMessage("ピラミッドの中にまで届けてくれるかのう？")
 ShowMessageFace("",0,0,2,66)
 ShowMessage("ピザを頼んだのはスフィンクスではないようだ……")
 JumpToLabel("メイン")
 0()
EndIf()
If(1,9,0,6,0)
 ShowMessageFace("sphinx_fc1",2,0,2,67)
 ShowMessage("【スフィンクス】")
 ShowMessage("長くピラミッドにこもっておった身だ。")
 ShowMessage("最先端の技術になど追いつけん……")
 ShowMessageFace("",0,0,2,68)
 ShowMessage("有益な情報は得られなかった……")
 JumpToLabel("メイン")
 0()
EndIf()
If(1,9,0,7,0)
 ShowMessageFace("sphinx_fc1",2,0,2,69)
 ShowMessage("【スフィンクス】")
 ShowMessage("我が手持ちの財宝秘宝は数あれど……")
 ShowMessage("いずれも美術品につき、争いの役には立たぬ。")
 ShowMessageFace("",0,0,2,70)
 ShowMessage("有益なアイテムは得られなかった……")
 JumpToLabel("メイン")
 0()
EndIf()
If(1,9,0,8,0)
 ShowMessageFace("sphinx_fc1",2,0,2,71)
 ShowMessage("【スフィンクス】")
 ShowMessage("音に聞く、黒のアリスか……")
 ShowMessage("かの者は好かぬ、遠慮させてもらおう。")
 ShowMessageFace("",0,0,2,72)
 ShowMessage("スフィンクスはお茶会の誘いを断った……")
 JumpToLabel("メイン")
 0()
EndIf()
EndEventProcessing()
0()
