// EVENT 0149
Name "死神：時間をリセット"

355("ex_choice_add(\"強くてニューゲーム\",1)")
655("ex_choice_add(\"コラボシナリオをリセット\",2,")
655("\"v[1212]>7\",0)")
655("ex_choice_add(\"ループ事件をリセット\",3,")
655("\"v[1122]==7\",0)")
655("ex_choice_add(\"夜祭を再体験\",4,")
655("\"v[1122]==7\",0)")
655("ex_choice_add(\"やめる\",5)")
355("ex_choice_show(0,11,[0,0])")
If(1,9,0,1,0)
 ShowMessageFace("sinigami_fc1",0,0,2,1)
 ShowMessage("【死神】")
 ShowMessage("体験版では選択できない……")
 EndEventProcessing()
 0()
EndIf()
If(1,9,0,2,0)
 ShowMessageFace("sinigami_fc1",0,0,2,2)
 ShowMessage("【死神】")
 ShowMessage("コラボシナリオをリセットすれば……")
 ShowMessage("また最初から、コラボシナリオをプレイ出来る。")
 ShowMessageFace("sinigami_fc1",0,0,2,3)
 ShowMessage("【死神】")
 ShowMessage("ただし、ゲストキャラも仲間から外れてしまうぞ。")
 ShowMessage("さて、コラボシナリオをリセットするか？")
 ShowChoices(strings("リセットしない","リセットする"),1)
 IfPlayerPicksChoice(0,"リセットしない")
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,"リセットする")
  ShowMessageFace("sinigami_fc1",0,0,2,4)
  ShowMessage("【死神】")
  ShowMessage("最終確認だ……")
  ShowMessage("本当に、コラボシナリオをリセットして良いのだな？")
  ShowChoices(strings("リセットしない","リセットする"),1)
  IfPlayerPicksChoice(0,"リセットしない")
   PictureClear(5)
   EndEventProcessing()
   0()
  IfPlayerPicksChoice(1,"リセットする")
   Wait(60)
   RunCommonEvent(155)
   ShowMessageFace("sinigami_fc1",0,0,2,5)
   ShowMessage("【死神】")
   ShowMessage("……コラボシナリオをリセットしたぞ。")
   ShowMessage("では、行くがいい。")
   PictureClear(5)
   EndEventProcessing()
   0()
  404()
  0()
 404()
 0()
EndIf()
If(1,9,0,3,0)
 ShowMessageFace("sinigami_fc1",0,0,2,6)
 ShowMessage("【死神】")
 ShowMessage("ループ事件の一件をリセットすれば……")
 ShowMessage("また最初から、ループシナリオをプレイ出来る。")
 ShowMessageFace("sinigami_fc1",0,0,2,7)
 ShowMessage("【死神】")
 ShowMessage("ただし、関連イベントの進行も元に戻ってしまうぞ。")
 ShowMessage("さて、時間ループシナリオをリセットするか？")
 ShowChoices(strings("リセットしない","リセットする"),1)
 IfPlayerPicksChoice(0,"リセットしない")
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,"リセットする")
  ShowMessageFace("sinigami_fc1",0,0,2,8)
  ShowMessage("【死神】")
  ShowMessage("最終確認だ……")
  ShowMessage("本当に、時間ループシナリオをリセットして良いのだな？")
  ShowChoices(strings("リセットしない","リセットする"),1)
  IfPlayerPicksChoice(0,"リセットしない")
   PictureClear(5)
   EndEventProcessing()
   0()
  IfPlayerPicksChoice(1,"リセットする")
   Wait(60)
   ChangeVariable(1098,1122,0,0,0)
   ChangeSwitch(2337,2433,1)
   ShowMessageFace("sinigami_fc1",0,0,2,9)
   ShowMessage("【死神】")
   ShowMessage("……時間ループシナリオをリセットしたぞ。")
   ShowMessage("では、行くがいい。")
   PictureClear(5)
   EndEventProcessing()
   0()
  404()
  0()
 404()
 0()
EndIf()
If(1,9,0,4,0)
 ShowMessageFace("sinigami_fc1",0,0,2,10)
 ShowMessage("【死神】")
 ShowMessage("もう一度、夜祭りをやり直したいのか？")
 ShowMessage("ずいぶん祭り好きだな……")
 ShowMessageFace("sinigami_fc1",0,0,2,11)
 ShowMessage("【死神】")
 ShowMessage("その程度ならば、大して時空に影響はないはず。")
 ShowMessage("さて、夜祭りの直前に戻るのか？")
 ShowChoices(strings("再体験しない","再体験する"),1)
 IfPlayerPicksChoice(0,"再体験しない")
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,"再体験する")
  221()
  PictureClear(5)
  Wait(180)
  TeleportPlayer(0,954,41,1,2,2)
  ChangeVariable(1122,1122,0,0,6)
  ChangeSwitch(31,31,1)
  ChangeSwitch(32,32,1)
  ChangeSwitch(33,33,1)
  ChangeSwitch(94,94,0)
  ChangeSwitch(100,100,0)
  ChangeSwitch(2433,2433,1)
  355("set_temp_actors(1)")
  222()
  RunCommonEvent(581)
  EndEventProcessing()
  0()
 404()
 0()
EndIf()
PictureClear(5)
EndEventProcessing()
0()
